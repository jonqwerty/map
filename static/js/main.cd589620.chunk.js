(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{30:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(8),i=n.n(c),s=(n(30),n(25)),o=n(5),l=n.n(o),p=n(10),u=n(3),j=n(15),h=n(7),d=n.n(h),b=n(0),g=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(""),s=Object(u.a)(i,2),o=s[0],j=s[1],h=Object(a.useState)(""),g=Object(u.a)(h,2),f=g[0],x=g[1],O=Object(a.useState)(null),m=Object(u.a)(O,2),v=m[0],C=m[1],y=function(){var t=Object(p.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=new FormData,!(r.match(/^[0-9]+[.]?[0-9]+$/)&&o.match(/^[0-9]+[.]?[0-9]+$/)&&f.length&&v)){t.next=17;break}return a.append("lat",r),a.append("lng",o),a.append("info",f),a.append("image",v),t.next=9,d.a.post("https://map-server-test.herokuapp.com/",a,{headers:{"Access-Control-Allow-Origin":"*"}});case 9:t.sent,c(""),j(""),x(""),C(null),e.setFlag(!e.flag),t.next=18;break;case 17:alert('Coordinates must be numeric with ".", and all fields must be filling');case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsx)("div",{style:{height:"500px",width:"6em",backgroundColor:"grey",textAlign:"center",fontSize:"40px"},children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("label",{children:["\u0428\u0438\u0440\u043e\u0442\u0430:",Object(b.jsx)("input",{value:r,type:"text",onChange:function(e){c(e.target.value.split(" ").join(""))}})]}),Object(b.jsxs)("label",{children:["\u0414\u043e\u0432\u0433\u043e\u0442\u0430:",Object(b.jsx)("input",{value:o,type:"text",onChange:function(e){j(e.target.value.split(" ").join(""))}})]}),Object(b.jsxs)("label",{children:["\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f:",Object(b.jsx)("input",{value:f,type:"text",onChange:function(e){x(e.target.value)}})]}),Object(b.jsxs)("label",{children:["\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e:",Object(b.jsx)("input",{name:"image",type:"file",onChange:function(e){return C(e.target.files[0])}})]}),Object(b.jsx)("button",{onClick:y,children:"\u0417\u0434\u0430\u0442\u0438 \u0432 \u043e\u0440\u0435\u043d\u0434\u0443"})]})})},f={width:"800px",height:"500px"},x=Object(j.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://map-server-test.herokuapp.com/",REACT_APP_API_URLl:"http://localhost:5000/"}).API_KEY})((function(e){var t=e.google,n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),h=Object(u.a)(o,2),x=h[0],O=h[1],m=Object(a.useState)([]),v=Object(u.a)(m,2),C=v[0],y=v[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),w=S[0],_=S[1];Object(a.useEffect)(Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("first effect"),e.next=3,d.a.get("https://map-server-test.herokuapp.com/").then((function(e){return O(e.data.positions)}));case 3:return e.next=5,d.a.get("https://map-server-test.herokuapp.com/").then((function(e){return y(e.data.positions)}));case 5:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)(Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://map-server-test.herokuapp.com/").then((function(e){return O(e.data.positions)}));case 2:return e.next=4,d.a.get("https://map-server-test.herokuapp.com/").then((function(e){return y(e.data.positions)}));case 4:case"end":return e.stop()}}),e)}))),[c]);var A=function(e){var n=[],a=w.map.getBounds();console.log(a);for(var r=0;r<x.length;r++)a.contains(new t.maps.LatLng(x[r].lat,x[r].lng))&&n.push(x[r]);y(n)},E=function(e){var t=e.position.lat,n=C.find((function(e){return e.lat===t})),a=C.filter((function(e){return e.lat!==t})),r=[n].concat(Object(s.a)(a));y(r)};return Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px",height:"100%"},children:[Object(b.jsx)(g,{flag:c,setFlag:i}),Object(b.jsx)("div",{style:{width:"800px",height:"500px"},children:Object(b.jsx)(j.Map,{id:"map",className:"map",google:t,zoom:11,style:f,initialCenter:{lat:50.44055686944465,lng:30.53022771561217},ref:function(e){return _(e)},onReady:A,onDragend:A,onZoomChanged:A,onClick:A,onTilesloaded:A,children:x.map((function(e){return Object(b.jsx)(j.Marker,{position:{lat:e.lat,lng:e.lng},onClick:E},e._id)}))})}),Object(b.jsx)("div",{style:{width:"300px",height:"600px"},children:C.map((function(e){return Object(b.jsxs)("div",{style:{backgroundColor:"grey",border:"solid black 2px",margin:"10px"},children:[Object(b.jsx)("div",{style:{margin:"10px"},children:Object(b.jsx)("img",{style:{border:"solid black 2px",width:"255px",height:"250px"},src:"data:".concat(e.contentType,";base64,").concat(e.imageBase64),alt:"image"})}),Object(b.jsxs)("div",{style:{padding:"10px"},children:[e.info," "]})]},e._id)}))})]})})),O=function(){return Object(b.jsx)("div",{style:{height:"100px",width:"100%",backgroundColor:"grey",textAlign:"center",fontSize:"80px"},children:"SOME PLACES IN MAP"})};var m=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(O,{}),Object(b.jsx)(x,{})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};console.log("https://map-server-test.herokuapp.com/"),i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),v()}},[[69,1,2]]]);
//# sourceMappingURL=main.cd589620.chunk.js.map