(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{30:function(t,e,n){},69:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),i=n(8),o=n.n(i),r=(n(30),n(25)),s=n(5),l=n.n(s),u=n(10),p=n(3),h=n(15),j=n(7),d=n.n(j),b=n(0),g=function(t){var e=Object(a.useState)(""),n=Object(p.a)(e,2),c=n[0],i=n[1],o=Object(a.useState)(""),r=Object(p.a)(o,2),s=r[0],h=r[1],j=Object(a.useState)(""),g=Object(p.a)(j,2),f=g[0],O=g[1],x=Object(a.useState)(null),m=Object(p.a)(x,2),v=m[0],C=m[1],S=function(){var e=Object(u.a)(l.a.mark((function e(n){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=new FormData,!(c.match(/^[0-9]+[.]?[0-9]+$/)&&s.match(/^[0-9]+[.]?[0-9]+$/)&&f.length&&v)){e.next=17;break}return a.append("lat",c),a.append("lng",s),a.append("info",f),a.append("image",v),o={headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},e.next=10,d.a.post("http://localhost:5000/",a,o).then((function(t){console.log("RESPONSE RECEIVED: ",t)})).catch((function(t){console.log("AXIOS ERROR: ",t)}));case 10:i(""),h(""),O(""),C(null),t.setFlag(!t.flag),e.next=18;break;case 17:alert('Coordinates must be numeric with ".", and all fields must be filling');case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{style:{height:"500px",width:"6em",backgroundColor:"grey",textAlign:"center",fontSize:"40px"},children:Object(b.jsxs)("form",{children:[Object(b.jsxs)("label",{children:["\u0428\u0438\u0440\u043e\u0442\u0430:",Object(b.jsx)("input",{value:c,type:"text",onChange:function(t){i(t.target.value.split(" ").join(""))}})]}),Object(b.jsxs)("label",{children:["\u0414\u043e\u0432\u0433\u043e\u0442\u0430:",Object(b.jsx)("input",{value:s,type:"text",onChange:function(t){h(t.target.value.split(" ").join(""))}})]}),Object(b.jsxs)("label",{children:["\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f:",Object(b.jsx)("input",{value:f,type:"text",onChange:function(t){O(t.target.value)}})]}),Object(b.jsxs)("label",{children:["\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e:",Object(b.jsx)("input",{type:"file",defaultValue:v,onChange:function(t){return C(t.target.files[0])}})]}),Object(b.jsx)("button",{onClick:S,children:"\u0417\u0434\u0430\u0442\u0438 \u0432 \u043e\u0440\u0435\u043d\u0434\u0443"})]})})},f={width:"800px",height:"500px"},O=Object(h.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000/",REACT_APP_API_URLl:"https://map-server-test.herokuapp.com/"}).API_KEY})((function(t){var e=t.google,n=Object(a.useState)(!1),c=Object(p.a)(n,2),i=c[0],o=c[1],s=Object(a.useState)([]),j=Object(p.a)(s,2),O=j[0],x=j[1],m=Object(a.useState)([]),v=Object(p.a)(m,2),C=v[0],S=v[1],y=Object(a.useState)(""),E=Object(p.a)(y,2),w=E[0],_=E[1];Object(a.useEffect)(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("first effect"),t.next=3,d.a.get("http://localhost:5000/").then((function(t){return x(t.data.positions)}));case 3:return t.next=5,d.a.get("http://localhost:5000/").then((function(t){return S(t.data.positions)}));case 5:case"end":return t.stop()}}),t)}))),[]),Object(a.useEffect)(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get("http://localhost:5000/").then((function(t){return x(t.data.positions)}));case 2:return t.next=4,d.a.get("http://localhost:5000/").then((function(t){return S(t.data.positions)}));case 4:case"end":return t.stop()}}),t)}))),[i]);var k=function(t){for(var n=[],a=w.map.getBounds(),c=0;c<O.length;c++)a.contains(new e.maps.LatLng(O[c].lat,O[c].lng))&&n.push(O[c]);S(n)},A=function(t){var e=t.position.lat,n=C.find((function(t){return t.lat===e})),a=C.filter((function(t){return t.lat!==e})),c=[n].concat(Object(r.a)(a));S(c)};return Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px",height:"100%"},children:[Object(b.jsx)(g,{flag:i,setFlag:o}),Object(b.jsx)("div",{style:{width:"800px",height:"500px"},children:Object(b.jsx)(h.Map,{id:"map",className:"map",google:e,zoom:11,style:f,initialCenter:{lat:50.44055686944465,lng:30.53022771561217},ref:function(t){return _(t)},onReady:k,onDragend:k,onZoomChanged:k,onClick:k,onTilesloaded:k,children:O.map((function(t){return Object(b.jsx)(h.Marker,{position:{lat:t.lat,lng:t.lng},onClick:A},t._id)}))})}),Object(b.jsx)("div",{style:{width:"300px",height:"600px"},children:C.map((function(t){return Object(b.jsxs)("div",{style:{backgroundColor:"grey",border:"solid black 2px",margin:"10px"},children:[Object(b.jsx)("div",{style:{margin:"10px"},children:Object(b.jsx)("img",{style:{border:"solid black 2px",width:"255px",height:"250px"},src:"http://localhost:5000/"+t.image,alt:"image"})}),Object(b.jsxs)("div",{style:{padding:"10px"},children:[t.info," "]})]},t._id)}))})]})})),x=function(){return Object(b.jsx)("div",{style:{height:"100px",width:"100%",backgroundColor:"grey",textAlign:"center",fontSize:"80px"},children:"SOME PLACES IN MAP"})};var m=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{}),Object(b.jsx)(O,{})]})},v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),i(t),o(t)}))};console.log("http://localhost:5000/"),o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(m,{})}),document.getElementById("root")),v()}},[[69,1,2]]]);
//# sourceMappingURL=main.476e343e.chunk.js.map