(this.webpackJsonpmap=this.webpackJsonpmap||[]).push([[0],{30:function(t,e,n){},78:function(t,e,n){"use strict";n.r(e);var a=n(1),c=n.n(a),o=n(7),i=n.n(o),r=(n.p,n(30),n(31),n(25)),s=n(3),l=n(9),p=n(15),u=n.n(p),j=n(24),h=n(6),b=n.n(h),d=n(0),g=function(t){var e=Object(a.useState)(""),n=Object(s.a)(e,2),c=n[0],o=n[1],i=Object(a.useState)(""),r=Object(s.a)(i,2),l=r[0],p=r[1],h=Object(a.useState)(""),g=Object(s.a)(h,2),O=g[0],f=g[1],x=Object(a.useState)(null),m=Object(s.a)(x,2),v=m[0],C=m[1];console.log("image",v);var S=function(){var e=Object(j.a)(u.a.mark((function e(n){var a,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=new FormData,!(c.match(/^[0-9]+[.]?[0-9]+$/)&&l.match(/^[0-9]+[.]?[0-9]+$/)&&O.length&&v)){e.next=17;break}return a.append("lat",c),a.append("lng",l),a.append("info",O),a.append("image",v),i={headers:{"Content-Type":"application/json; charset=utf-8","Access-Control-Allow-Origin":"*"}},e.next=10,b.a.post("https://map-server-test.herokuapp.com/",a,i).then((function(t){console.log("RESPONSE RECEIVED: ",t)})).catch((function(t){console.log("AXIOS ERROR: ",t)}));case 10:o(""),p(""),f(""),C(null),t.setFlag(!t.flag),e.next=18;break;case 17:alert('Coordinates must be numeric with ".", and all fields must be filling');case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{style:{height:"500px",width:"6em",backgroundColor:"grey",textAlign:"center",fontSize:"40px"},children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("label",{children:["\u0428\u0438\u0440\u043e\u0442\u0430:",Object(d.jsx)("input",{value:c,type:"text",onChange:function(t){o(t.target.value.split(" ").join(""))}})]}),Object(d.jsxs)("label",{children:["\u0414\u043e\u0432\u0433\u043e\u0442\u0430:",Object(d.jsx)("input",{value:l,type:"text",onChange:function(t){p(t.target.value.split(" ").join(""))}})]}),Object(d.jsxs)("label",{children:["\u0406\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f:",Object(d.jsx)("input",{value:O,type:"text",onChange:function(t){f(t.target.value)}})]}),Object(d.jsxs)("label",{children:["\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438 \u0444\u043e\u0442\u043e:",Object(d.jsx)("input",{type:"file",defaultValue:v,onChange:function(t){return C(t.target.files[0])}})]}),Object(d.jsx)("button",{onClick:S,children:"\u0417\u0434\u0430\u0442\u0438 \u0432 \u043e\u0440\u0435\u043d\u0434\u0443"})]})})},O={width:"800px",height:"500px"},f=Object(l.GoogleApiWrapper)({apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/map",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://map-server-test.herokuapp.com/",REACT_APP_API_URLl:"http://localhost:5000/"}).API_KEY})((function(t){var e=t.google,n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)([]),u=Object(s.a)(p,2),j=u[0],h=u[1];console.log(j);var f=Object(a.useState)([]),x=Object(s.a)(f,2),m=x[0],v=x[1],C=Object(a.useState)(""),S=Object(s.a)(C,2),y=S[0],E=S[1];Object(a.useEffect)((function(){b.a.get("https://map-server-test.herokuapp.com/").then((function(t){return h(t.data.positions)})),b.a.get("https://map-server-test.herokuapp.com/").then((function(t){return v(t.data.positions)}))}),[]),console.log(j),Object(a.useEffect)((function(){setTimeout((function(){return b.a.get("https://map-server-test.herokuapp.com/").then((function(t){return h(t.data.positions)}))}),3e3)}),[o]);var k=function(t){for(var n=[],a=y.map.getBounds(),c=0;c<j.length;c++)a.contains(new e.maps.LatLng(j[c].lat,j[c].lng))&&n.push(j[c]);v(n)},_=function(t){var e=t.position.lat,n=m.find((function(t){return t.lat===e})),a=m.filter((function(t){return t.lat!==e})),c=[n].concat(Object(r.a)(a));v(c)};return Object(d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"20px",height:"100%"},children:[Object(d.jsx)(g,{flag:o,setFlag:i}),Object(d.jsx)("div",{style:{width:"800px",height:"500px"},children:Object(d.jsx)(l.Map,{className:"map",google:e,zoom:11,style:O,initialCenter:{lat:50.44055686944465,lng:30.53022771561217},ref:function(t){return E(t)},onDragend:k,onZoomChanged:k,children:j.map((function(t){return Object(d.jsx)(l.Marker,{position:{lat:t.lat,lng:t.lng},onClick:_},t._id)}))})}),Object(d.jsx)("div",{style:{width:"300px"},children:m.map((function(t){return Object(d.jsxs)("div",{style:{backgroundColor:"grey",border:"solid black 2px",margin:"10px"},children:[Object(d.jsx)("div",{style:{margin:"10px"},children:Object(d.jsx)("img",{style:{border:"solid black 2px",width:"255px",height:"250px"},src:"https://map-server-test.herokuapp.com/"+t.image,alt:"image"})}),Object(d.jsxs)("div",{style:{padding:"10px"},children:[t.info," "]})]},t._id)}))})]})})),x=function(){return Object(d.jsx)("div",{style:{height:"100px",width:"100%",backgroundColor:"grey",textAlign:"center",fontSize:"80px"},children:"SOME PLACES IN MAP"})};var m=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x,{}),Object(d.jsx)(f,{})]})},v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),o(t),i(t)}))};console.log("https://map-server-test.herokuapp.com/"),i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root")),v()}},[[78,1,2]]]);
//# sourceMappingURL=main.5d00d4d2.chunk.js.map